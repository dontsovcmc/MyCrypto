<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using SSH for remote login &mdash; MyCrypto 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="MyCrypto 1.0 documentation" href="index.html" />
    <link rel="next" title="Working with bytes in Python" href="bytes.html" />
    <link rel="prev" title="Standard key formats" href="formats.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="bytes.html" title="Working with bytes in Python"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="formats.html" title="Standard key formats"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">MyCrypto 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="using-ssh-for-remote-login">
<span id="server"></span><h1>Using SSH for remote login<a class="headerlink" href="#using-ssh-for-remote-login" title="Permalink to this headline">¶</a></h1>
<p><strong>SSH</strong></p>
<p>Various utilities for <tt class="docutils literal"><span class="pre">ssh</span></tt> are in <tt class="docutils literal"><span class="pre">/usr/bin</span></tt></p>
<div class="highlight-bash"><div class="highlight"><pre>$ ls /usr/bin/ssh*
/usr/bin/ssh
/usr/bin/ssh-add
/usr/bin/ssh-agent
/usr/bin/ssh-keygen
/usr/bin/ssh-keyscan
$
</pre></div>
</div>
<p>On my machine, server keys are in <tt class="docutils literal"><span class="pre">/private/etc/</span></tt>.  With the <tt class="docutils literal"><span class="pre">-l</span></tt> flag, <tt class="docutils literal"><span class="pre">ssh-keygen</span></tt> can get the fingerprint of the public key that my machine uses when it acts as a file server for remote connections.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ssh-keygen -l -f /private/etc/ssh_host_rsa_key.pub
2048 66:9d:5e:28:32:60:65:ec:99:77:09:87:73:f4:4b:c7   <span class="o">(</span>RSA<span class="o">)</span>
</pre></div>
</div>
<p>This public key is similar to what we saw before:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>hexdump -C /private/etc/ssh_host_rsa_key.pub
00000000  73 73 68 2d 72 73 61 20  41 41 41 41 42 33 4e 7a  |ssh-rsa AAAAB3Nz|
00000010  61 43 31 79 63 32 45 41  41 41 41 44 41 51 41 42  |aC1yc2EAAAADAQAB|
00000020  41 41 41 42 41 51 44 4f  34 4b 6a 7a 76 30 2f 49  |AAABAQDO4Kjzv0/I|
</pre></div>
</div>
<p>with the -v flag, <tt class="docutils literal"><span class="pre">-l</span></tt> will give the ASCII art representation of the public key.</p>
<p>Try to connect:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ssh telliott_admin@127.0.0.1
ssh: connect to host 127.0.0.1 port 22: Connection refused
</pre></div>
</div>
<p>Turn on remote login in System Prefs &gt; Sharing (and turn off WiFi if you’re as paranoid as I am).</p>
<a class="reference internal image-reference" href="_images/sharing.png"><img alt="_images/sharing.png" src="_images/sharing.png" style="width: 333.0px; height: 273.5px;" /></a>
<p>Then from a new Terminal window</p>
<div class="highlight-bash"><div class="highlight"><pre>$ ssh telliott_admin@127.0.0.1
The authenticity of host &#39;127.0.0.1 (127.0.0.1)&#39; can&#39;t be established.
RSA key fingerprint is 66:9d:5e:28:32:60:65:ec:99:77:09:87:73:f4:4b:c7.
</pre></div>
</div>
<p>Since the fingerprint matches what we got by direct inspection of the host’s RSA public key, we’re good.</p>
<div class="highlight-bash"><div class="highlight"><pre>$ ssh telliott_admin@127.0.0.1
The authenticity of host &#39;127.0.0.1 (127.0.0.1)&#39; can&#39;t be established.
RSA key fingerprint is 66:9d:5e:28:32:60:65:ec:99:77:09:87:73:f4:4b:c7.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added &#39;127.0.0.1&#39; (RSA) to the list of known hosts.
Password:
Last login: Fri May 30 08:23:59 2014
</pre></div>
</div>
<p>Test it out:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>say I sure love being inside this fancy computer
</pre></div>
</div>
<p>To quit:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">logout</span>
Connection to 127.0.0.1 closed.
</pre></div>
</div>
<p>Examine the public key of this host:</p>
<div class="highlight-bash"><div class="highlight"><pre>$ ls ~/.ssh
known_hosts
$ cat ~/.ssh/known_hosts
127.0.0.1 ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDO4K..
$
</pre></div>
</div>
<p>A better alternative is to look at the key fingerprint</p>
<div class="highlight-bash"><div class="highlight"><pre>$ ssh-keygen -l -f ~/.ssh/known_hosts
2048 66:9d:5e:28:32:60:65:ec:99:77:09:87:73:f4:4b:c7 127.0.0.1 (RSA)
$
</pre></div>
</div>
<p>What’s happened is that the client, my account (which is the same one I’m trying to login to, for convenience), has added 127.0.0.1 (local host) to the list of known hosts.   Once you&#8217;ve added the host to the list of know hosts, you should not see this message again. If that happens, it would suggest that a ”man in the middle” is trying to impersonate the server, using a different key.</p>
<p>The next step is to use RSA keys to authenticate the login, rather than my account password. One can use either an RSA or a DSA key.  According to this</p>
<p><a class="reference external" href="http://security.stackexchange.com/questions/5096/rsa-vs-dsa-for-ssh-authentication-keys">http://security.stackexchange.com/questions/5096/rsa-vs-dsa-for-ssh-authentication-keys</a></p>
<p>DSA is faster for signature generation but slower for validation, slower when encrypting but faster when decrypting and security can be considered equivalent compared to an RSA key of equal key length...The security of the RSA algorithm is based on the fact that factorization of large integers is known to be &#8220;difficult&#8221;, whereas DSA security is based on the discrete logarithm problem.</p>
<p>To generate an RSA key pair, simply do</p>
<div class="highlight-bash"><div class="highlight"><pre>$ ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/Users/telliott_admin/.ssh/id_rsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /Users/telliott_admin/.ssh/id_rsa.
Your public key has been saved in /Users/telliott_admin/.ssh/id_rsa.pub.
The key fingerprint is:
The key fingerprint is:
0f:54:06:54:ac:14:31:d9:1d:15:95:64:2f:50:89:78 telliott_admin@Toms-MacBook-Air.local
The key&#39;s randomart image is:
+--[ RSA 2048]----+
|       .*O+oo==*o|
|        o++ E.o..|
|       ... .  . .|
|       ..      . |
|        S        |
|         o       |
|          .      |
|                 |
|                 |
+-----------------+
$
</pre></div>
</div>
<p>Now, if I look in .ssh</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ssh-keygen -l -f ~/.ssh/id_rsa.pub
2048 0f:54:06:54:ac:14:31:d9:1d:15:95:64:2f:50:89:78  telliott.. <span class="o">(</span>RSA<span class="o">)</span>
</pre></div>
</div>
<p>The fingerprints match. Remember your passphrase!</p>
<p>The next step is to copy my public key to the server. Logon using the password method, then do <tt class="docutils literal"><span class="pre">scp</span></tt> (secure copy)</p>
<div class="highlight-bash"><div class="highlight"><pre>$ ssh telliott_admin@127.0.0.1
Password:
Last login: Fri May 30 08:33:41 2014 from localhost
$ scp ~/.ssh/id_rsa.pub telliott_admin@127.0.0.1:~/.ssh/authorized_keys
Password:
id_rsa.pub                                    100%  419     0.4KB/s   00:00
$ logout
Connection to 127.0.0.1 closed.
$
</pre></div>
</div>
<p>It’s quite straightforward now. I just do <tt class="docutils literal"><span class="pre">ssh</span></tt> from Terminal, and a window pops up asking for my passphrase for my private key, and the rest just works.</p>
<a class="reference internal image-reference" href="_images/passphrase.png"><img alt="_images/passphrase.png" src="_images/passphrase.png" style="width: 134.4px; height: 68.1px;" /></a>
<div class="highlight-bash"><div class="highlight"><pre>$ ssh telliott_admin@127.0.0.1
Enter passphrase for key &#39;/Users/telliott_admin/.ssh/id_rsa&#39;:
Last login: Fri May 30 08:52:51 2014 from localhost
$
</pre></div>
</div>
<p>That’s the basic approach to setting up remote login via ssh on OS X.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="formats.html"
                        title="previous chapter">Standard key formats</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="bytes.html"
                        title="next chapter">Working with bytes in Python</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/server.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="bytes.html" title="Working with bytes in Python"
             >next</a> |</li>
        <li class="right" >
          <a href="formats.html" title="Standard key formats"
             >previous</a> |</li>
        <li><a href="index.html">MyCrypto 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Tom Elliott.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>